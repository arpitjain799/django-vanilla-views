<!DOCTYPE html>
<html lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Django Vanilla Views - Model Views</title>
    <link href="http://django-vanilla-views.org/img/favicon.ico" rel="icon" type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Django, CBV, GCBV, Generic class based views, Model Views">
    <meta name="author" content="Tom Christie">

    <!-- Le styles -->
    <link href="http://django-vanilla-views.org/css/prettify.css" rel="stylesheet">
    <link href="http://django-vanilla-views.org/css/bootstrap.css" rel="stylesheet">
    <link href="http://django-vanilla-views.org/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="http://django-vanilla-views.org/css/default.css" rel="stylesheet">

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-27795084-3', 'django-vanilla-views.org');
      ga('send', 'pageview');

    </script>
  </head>
  <body onload="prettyPrint()" class="model-views-page">

  <div class="wrapper">

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container-fluid">
            <a class="repo-link btn btn-primary btn-small" href="https://github.com/tomchristie/django-vanilla-views/tree/master">GitHub</a>
            <a class="repo-link btn btn-inverse btn-small " href="../migration/base-views">Next <i class="icon-arrow-right icon-white"></i></a>
            <a class="repo-link btn btn-inverse btn-small " href="../api/base-views"><i class="icon-arrow-left icon-white"></i> Previous</a>
            <a class="repo-link btn btn-inverse btn-small" href="#searchModal" data-toggle="modal"><i class="icon-search icon-white"></i> Search</a>
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="http://django-vanilla-views.org">Django Vanilla Views</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="http://django-vanilla-views.org">Home</a></li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">API Guide <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="http://django-vanilla-views.org/api/base-views">Base Views</a></li>
                  <li><a href="http://django-vanilla-views.org/api/model-views">Model Views</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Migration Guide <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="http://django-vanilla-views.org/migration/base-views">Base Views</a></li>
                  <li><a href="http://django-vanilla-views.org/migration/model-views">Model Views</a></li>
                </ul>
              </li>
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Topics <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="http://django-vanilla-views.org/topics/frequently-asked-questions">Frequently Asked Questions</a></li>
                  <li><a href="http://django-vanilla-views.org/topics/django-braces-compatibility">Django Braces Compatibility</a></li>
                  <li><a href="http://django-vanilla-views.org/topics/django-extra-views-compatibility">Django Extra Views Compatibility</a></li>
                  <li><a href="http://django-vanilla-views.org/topics/release-notes">Release Notes</a></li>
                </ul>
              </li>
            </ul>
            <ul class="nav pull-right">
              <!-- TODO
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Version: 2.0.0 <b class="caret"></b></a>
                <ul class="dropdown-menu">
                  <li><a href="#">Trunk</a></li>
                  <li><a href="#">2.0.0</a></li>
                </ul>
              </li>
            -->
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="body-content">
      <div class="container-fluid">

<!-- Search Modal -->
<div id="searchModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-header">
    <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
    <h3 id="myModalLabel">Documentation search</h3>
  </div>
  <div class="modal-body">
    <!-- Custom google search -->
    <script>
      (function() {
        var cx = '015016005043623903336:vem911c4guk';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:search></gcse:search>
  </div>
  <div class="modal-footer">
    <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
  </div>
</div>

        <div class="row-fluid">

          <div class="span3">
            <!-- TODO
            <p style="margin-top: -12px">
              <a class="btn btn-mini btn-primary" style="width: 60px">&laquo; previous</a>
              <a class="btn btn-mini btn-primary" style="float: right; margin-right: 8px; width: 60px;">next &raquo;</a>
            </p>
          -->
            <div id="table-of-contents">
              <ul class="nav nav-list side-nav well sidebar-nav-fixed">
                <li class="main"><a href="#model-views">Model Views</a></li>
<li><a href="#genericmodelview">GenericModelView</a></li>
<li><a href="#listview">ListView</a></li>
<li><a href="#detailview">DetailView</a></li>
<li><a href="#createview">CreateView</a></li>
<li><a href="#updateview">UpdateView</a></li>
<li><a href="#deleteview">DeleteView</a></li>

              </ul>
            </div>
          </div>

          <div id="main-content" class="span9">
            <p><a class="github" href="https://github.com/encode/django-vanilla-views/tree/master/vanilla/model_views.py"><span class="label label-info">model_views.py</span></a></p>
<h1 id="model-views">Model Views</h1>
<p>The model views provide a simple set of generic views for working with Django querysets and model instances.</p>
<p>They replicate the functionality of Django's existing <code>ListView</code>, <code>DetailView</code>, <code>CreateView</code>, <code>UpdateView</code> and <code>DeleteView</code>, but present a simpler API and implementation.</p>
<pre class="prettyprint lang-py"><code>View -- GenericModelView --+-- ListView
                           |
                           +-- DetailView
                           |
                           +-- CreateView
                           |
                           +-- UpdateView
                           |
                           +-- DeleteView
</code></pre>
<hr />
<h2 id="genericmodelview">GenericModelView</h2>
<p>The <code>GenericModelView</code> class is used as the base class for all of the model views, and provides methods allowing for a default set of viewing, listing and editing actions.</p>
<h3 id="attributes">Attributes</h3>
<h4 id="model">model</h4>
<p>The model class that the view operates on.  This is used as a shortcut to provide default behavior for the view.  The default behaviour may be overridden by setting more specific attributes, or by overriding methods on the view.</p>
<h4 id="queryset">queryset</h4>
<p>The base queryset that should be used for list views, or used when performing object lookups for detail views.  If set to <code>None</code> then a default queryset will be used based on the <code>model</code> attribute.  Defaults to <code>None</code>.</p>
<h4 id="lookup_field">lookup_field</h4>
<p>The name of the model field that should be used for object lookups.  Defaults to <code>'pk'</code>.</p>
<h4 id="lookup_url_kwarg">lookup_url_kwarg</h4>
<p>The name of the URLconf keyword argument that should be used for object lookups.  If unset this defaults to the same value as <code>lookup_field</code>.</p>
<h4 id="form_class">form_class</h4>
<p>The form class that should be used for create or update views.  If set to <code>None</code> then a default form class will be used based on the <code>model</code> and <code>fields</code> attributes.  Defaults to <code>None</code>.</p>
<h4 id="fields">fields</h4>
<p>A list of strings, representing the fields that should be displayed by the form.  This may be used along with the <code>model</code> attribute, as a shortcut to setting the <code>form_class</code> attribute.  Defaults to <code>None</code>.</p>
<h4 id="paginate_by">paginate_by</h4>
<p>The number of items to return in each page.  Set to a positive integer value to enable pagination.  If set to <code>None</code> then pagination is disabled.  Defaults to <code>None</code>.</p>
<h4 id="page_kwarg">page_kwarg</h4>
<p>The name of the URL query parameter that is used to select the active page in a paginated list.  For example: <code>http://example.com/widget_list?page=6</code>.  Defaults to <code>'page'</code>.</p>
<h4 id="template_name">template_name</h4>
<p>A string representing the template name that should be used when rendering the response content.  If set to <code>None</code>, then the template name will be automatically generated based on the <code>model</code> attribute.  Defaults to <code>None</code>.</p>
<h4 id="template_name_suffix">template_name_suffix</h4>
<p>A suffix that should be appended when automatically generating template names based on the <code>model</code> attribute.  Defaults to <code>None</code>, but is set to an appropriate value of either <code>'_detail'</code>, <code>'_list'</code> or <code>'_form'</code> by each of the model view subclasses.</p>
<h4 id="context_object_name">context_object_name</h4>
<p>A key to use when passing the queryset or instance as context to the response.  If set to <code>None</code> then the context object name will be automatically generated based on the <code>model</code> attribute.  Defaults to <code>None</code>.</p>
<hr />
<h3 id="methods">Methods</h3>
<h4 id="get_querysetself">get_queryset(self)</h4>
<p>This method should return a queryset representing the set of instances that the view should operate on.</p>
<p>The default behavior of this method is:</p>
<ul>
<li>If the <code>queryset</code> attribute is set, then return that.</li>
<li>Otherwise fallback to returning the default queryset for the model class as determined by the <code>model</code> attribute.</li>
<li>If neither the <code>queryset</code> or <code>model</code> attributes are set then a configuration error will be raised.</li>
</ul>
<p>You can customize how the querysets for the view are determined by overriding this method.  For example:</p>
<pre class="prettyprint lang-py"><code>def get_queryset(self):
    """
    Custom queryset that only returns book instances owned by the logged-in user.
    """
    return Book.objects.filter(owner=self.request.user)
</code></pre>
<h4 id="get_objectself">get_object(self)</h4>
<p>This method should return a single model instance that the view should operate on, and is used by <code>DetailView</code>, <code>UpdateView</code> and <code>DeleteView</code>.</p>
<p>The default behavior for this method is:</p>
<ul>
<li>Call <code>get_queryset()</code> to determine the base queryset to use for the lookup.</li>
<li>Perform the object lookup based on the <code>lookup_field</code> and  <code>lookup_url_kwarg</code> attributes.</li>
<li>Raise an <code>HTTP 404 Not Found</code> response if the instance does not exist.</li>
</ul>
<p>You can perform custom object lookups by overriding this method.  For example:</p>
<pre class="prettyprint lang-py"><code>def get_object(self):
    """
    Custom object lookup that returns an instance based on both the
    'account' and 'slug' as provided in the URL keyword arguments.
    """
    queryset = self.get_queryset()
    account = self.kwargs['account']
    slug = self.kwargs['slug']
    return get_object_or_404(queryset, account=account, slug=slug)
</code></pre>
<h4 id="get_form_classself">get_form_class(self)</h4>
<p>This method returns the class that should be used for generating forms.</p>
<p>The default behavior of this method is:</p>
<ul>
<li>If the <code>form_class</code> attribute is set, then return that.</li>
<li>Otherwise fallback to returning an automatically generated form class based on the <code>model</code> attribute.</li>
<li>If neither the <code>form_class</code> or <code>model</code> attributes are set then a configuration error will be raised.</li>
</ul>
<p>You can customize how the form class for the view is determined by overriding this method.  For example:</p>
<pre class="prettyprint lang-py"><code>def get_form_class(self):
    is self.request.user.is_staff():
        return AccountForm
    return BasicAccountForm
</code></pre>
<h4 id="get_formself-datanone-filesnone-kwargs">get_form(self, data=None, files=None, **kwargs)</h4>
<p>The method instantiates and returns the form instance that should be used for the view.</p>
<p>By default this method simply calls <code>get_form_class</code>, and then instantiates the class with the parameters that have been passed to it.</p>
<p>You can customize this method in order to supply additional arguments to the form class, add initial data, or other customizations.  For example:</p>
<pre class="prettyprint lang-py"><code>def get_form(self, data=None, files=None, **kwargs):
    kwargs['user'] = self.request.user
    return AccountForm(data, files, **kwargs)
</code></pre>
<h4 id="get_paginate_byself">get_paginate_by(self)</h4>
<p>Returns an integer representing the number of items to display on each page of a paginated list.  Returns <code>None</code> if pagination is not enabled.</p>
<p>By default this method simply returns value of the <code>paginate_by</code> attribute.</p>
<p>You can override this method to provide more complex behavior.  For example, to allow the user to override the default pagination size using a query parameter in the URL, you might write something like this:</p>
<pre class="prettyprint lang-py"><code>def get_paginate_by(self):
    try:
        return int(self.request.GET('page_size', self.paginate_by))
    except ValueError:
        return None
</code></pre>
<h4 id="get_paginatorself-queryset-page_size">get_paginator(self, queryset, page_size)</h4>
<p>Given a queryset and a page size, returns a paginator instance to use for a paginated list view.</p>
<p>By default this method simply instantiates Django's standard <code>Paginator</code> class with the arguments passed.</p>
<p>If you need to customize how the paginator is instantiated you can override this method.  For example to ensure that the final page must always contain more than a single item, you could write something like this:</p>
<pre class="prettyprint lang-py"><code>def get_paginator(self, queryset, page_size):
    return Paginator(queryset, page_size, orphans=2)
</code></pre>
<h4 id="paginate_querysetself-queryset-page_size">paginate_queryset(self, queryset, page_size)</h4>
<p>Given a queryset and a page size, this method should return a <code>page</code> instance representing the current page that should be displayed in a paginated list view.  You can override this method if you need to customize how the page object is determined, but the default behavior should typically be sufficient.</p>
<h4 id="get_context_object_nameself-is_listfalse">get_context_object_name(self, is_list=False)</h4>
<p>This method returns a descriptive name that should be used when passing the object or object list as context to the template.  The name is used <em>in addition</em> to the default <code>'object'</code> or <code>'object_list'</code> context name.</p>
<p>The method takes a single parameter <code>is_list</code>, which is a boolean indicating if the context object should be named as representing a list of data, or if it should be named as representing a single object.</p>
<p>The default behavior of this method is:</p>
<ul>
<li>If the <code>context_object_name</code> attribute is set, then use that.</li>
<li>Otherwise fallback to automatically using <code>&lt;model_name&gt;</code> or <code>&lt;model_name&gt;_list</code> based on the <code>model</code> attribute.</li>
<li>If neither the <code>context_object_name</code> or <code>model</code> attributes are set, then only the standard <code>'object'</code> or <code>'object_list'</code> key will be used.</li>
</ul>
<h4 id="get_context_dataself-kwargs">get_context_data(self, **kwargs)</h4>
<p>This method takes a set of keyword arguments supplied by the view and returns a dictionary to use as context when rendering the response template.</p>
<p>The default behavior of this method is to return a dictionary populated with the following keys:</p>
<ul>
<li><code>view</code> - A reference to the view instance.</li>
<li><code>object</code> or <code>object_list</code> - The instance or queryset being operated on by the view.</li>
<li><code>&lt;context_object_name&gt;</code> - A more descriptive name for the instance or queryset as returned by <code>get_context_object_name</code>.</li>
<li>Any additional keyword arguments supplied to the method.  In particular, the model editing views include the <code>form</code> context key.</li>
</ul>
<p>You can override the method either to add additional context data:</p>
<pre class="prettyprint lang-py"><code>def get_context_data(self, **kwargs):
    context = super(MyView, self).get_context_data(**kwargs)
    context['is_admin'] = self.request.user.is_admin
    return context
</code></pre>
<p>Or to specify the complete set of context data explicitly:</p>
<pre class="prettyprint lang-py"><code>def get_context_data(self, **kwargs):
    kwargs['view'] = self
    kwargs['is_admin'] = self.request.user.is_admin
    kwargs['account'] = self.object
    return kwargs
</code></pre>
<h4 id="get_template_namesself">get_template_names(self)</h4>
<p>Returns a list of strings that should be used for determining the template name when rendering the response.</p>
<p>The default behavior for this method is:</p>
<ul>
<li>If <code>template_name</code> is specified on the view then use that.</li>
<li>Otherwise fallback to automatically generating a template name as <code>{app_label}/{model_name}{suffix}.html</code>, using the <code>model</code> attribute as set on the view.</li>
<li>If neither of <code>template_name</code> or <code>model</code> attributes are set then raise a configuration error.</li>
</ul>
<h4 id="render_to_responseself-context">render_to_response(self, context)</h4>
<p>Generates the response that should be returned by the view.  Takes a single argument which should be a dictionary of context data to use when rendering the response template.</p>
<p>The default behaviour of this method is to return an instance of Django's standard <code>TemplateResponse</code>.</p>
<p>You can override this method if you need to customize how the response is generated.  For example, to return a response with the <code>text/plain</code> content type instead of the standard <code>text/html</code>, you could write something like this:</p>
<pre class="prettyprint lang-py"><code>def render_to_response(context):
    template = self.get_template_names()
    return TemplateResponse(self.request, template, context, content_type='text/plain')
</code></pre>
<p>You can also override this class in order to use a subclass of Django's standard <code>HttpResponse</code> or <code>TemplateResponse</code>.  For example, if you had a written a custom <code>JSONResponse</code> class, you might override the method like this:</p>
<pre class="prettyprint lang-py"><code>def render_to_response(context):
    return JSONResponse(self.request, context)
</code></pre>
<hr />
<h2 id="listview">ListView</h2>
<p>A page representing a list of objects.  Optionally this may represent a paginated view onto the list.</p>
<p>The <code>object_list</code> attribute will be set on this view, and will typically be a queryset instance.</p>
<h4 id="allow_empty">allow_empty</h4>
<p>A boolean indicating if empty lists may be returned using the standard page template, or if they should cause an <code>HTTP 404 Not Found</code> response to be returned.  Defaults to <code>True</code>, indicating that empty pages should be allowed.</p>
<hr />
<h2 id="detailview">DetailView</h2>
<p>A page representing a single object.</p>
<p>The <code>object</code> attribute will be set on this view, and will typically be a model instance.</p>
<hr />
<h2 id="createview">CreateView</h2>
<p>A page which allows the user to create objects.</p>
<p>If successfully created, then the <code>object</code> attribute will be set on this view.</p>
<h4 id="success_url">success_url</h4>
<p>The URL that should be used when redirecting after a successful form submission.</p>
<h4 id="form_validself-form">form_valid(self, form)</h4>
<p>This method will be run when a valid form submission occurs, and should return a response object.  The default behavior is to return a redirect response as determined by calling <code>get_success_url()</code>.</p>
<h4 id="form_invalidself-form">form_invalid(self, form)</h4>
<p>This method will be run when an invalid form submission occurs, and should return a response object.  The default behavior is to return a <code>TemplateResponse</code> which renders the form errors.</p>
<h4 id="get_success_url">get_success_url()</h4>
<p>Returns the URL that should be used when redirecting after a successful form submission.  Defaults to returning the value of the <code>success_url</code> attribute if it is set, or will be the return value of calling <code>get_absolute_url()</code> on the object instance.</p>
<p><strong>Note</strong>: If you are customizing the view behavior, we'd typically recommend overriding the <code>form_valid()</code> method directly rather than overriding <code>get_success_url()</code>, as it will result in simpler, more obvious flow control.</p>
<hr />
<h2 id="updateview">UpdateView</h2>
<p>A page which allows the user to update an existing object.</p>
<p>The <code>object</code> attribute will be set on this view.</p>
<h4 id="success_url_1">success_url</h4>
<p>The URL that should be used when redirecting after a successful form submission.</p>
<h4 id="form_validself-form_1">form_valid(self, form)</h4>
<p>This method will be run when a valid form submission occurs, and should return a response object.  The default behavior is to save the updated object instance and then return a redirect response as determined by calling <code>get_success_url()</code>.</p>
<h4 id="form_invalidself-form_1">form_invalid(self, form)</h4>
<p>This method will be run when an invalid form submission occurs, and should return a response object.  The default behavior is to return a <code>TemplateResponse</code> which renders the form errors.</p>
<h4 id="get_success_url_1">get_success_url()</h4>
<p>Returns the URL that should be used when redirecting after a successful form submission.  Defaults to returning the value of the <code>success_url</code> attribute if it is set, or will be the return value of calling <code>get_absolute_url()</code> on the object instance.</p>
<p><strong>Note</strong>: If you are customizing the view behavior, we'd typically recommend overriding the <code>form_valid()</code> method directly rather than overriding <code>get_success_url()</code>, as it will result in simpler, more obvious flow control.</p>
<hr />
<h2 id="deleteview">DeleteView</h2>
<p>The <code>object</code> attribute will be set on this view.</p>
<h4 id="success_url_2">success_url</h4>
<p>The URL that should be used when redirecting after a successful form submission.</p>
<h4 id="get_success_url_2">get_success_url()</h4>
<p>Returns the URL that should be used when redirecting after a successful form submission.  Defaults to returning the value of the <code>success_url</code> attribute.</p>
<p><strong>Note</strong>: If you are customizing the view behavior, we'd typically recommend overriding the <code>post()</code> method directly rather than overriding <code>get_success_url()</code>, as it will result in simpler, more obvious flow control.</p>
          </div><!--/span-->
        </div><!--/row-->
      </div><!--/.fluid-container-->
    </div><!--/.body content-->

      <div id="push"></div>
  </div><!--/.wrapper -->

  <footer class="span12">
    <p>Sponsored by <a href="http://dabapps.com/">DabApps</a>.</a></p>
  </footer>

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="http://django-vanilla-views.org/js/jquery-1.8.1-min.js"></script>
    <script src="http://django-vanilla-views.org/js/prettify-1.0.js"></script>
    <script src="http://django-vanilla-views.org/js/bootstrap-2.1.1-min.js"></script>
    <script>
      //$('.side-nav').scrollspy()
      var shiftWindow = function() { scrollBy(0, -50) };
      if (location.hash) shiftWindow();
      window.addEventListener("hashchange", shiftWindow);

      $('.dropdown-menu').on('click touchstart', function(event) {
        event.stopPropagation();
      });

      // Dynamically force sidenav to no higher than browser window
      $('.side-nav').css('max-height', window.innerHeight - 130);

      $(function(){
        $(window).resize(function(){
          $('.side-nav').css('max-height', window.innerHeight - 130);
        });
      });
    </script>
</body></html>
